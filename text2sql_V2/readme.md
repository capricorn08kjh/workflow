### **1. 쿼리 의도 분석 고도화**
- **정형/비정형 데이터 구분**: Oracle DB와 ChromaDB 자동 선택
- **시각화 의도 감지**: 라인, 파이, 막대차트 etc. 자동 판단
- **하이브리드 쿼리 지원**: 정형+비정형 데이터 동시 조회

### **2. 다중 데이터 소스 통합**
- **Oracle DB**: 기존 테이블 데이터, 복잡한 조인 쿼리
- **ChromaDB**: LlamaIndex 기반 문서 검색, 벡터 유사도 검색
- **하이브리드 분석**: 데이터와 문서를 연결한 종합 분석

### **3. 고급 시각화 기능**
- **다양한 차트**: 라인, 막대, 파이, 산점도, 히트맵, 히스토그램
- **인터랙티브 차트**: Plotly 기반 동적 시각화
- **표 생성**: HTML, CSV, JSON 형태 지원
- **대시보드**: 여러 시각화 요소를 통합한 대시보드

### **4. 대화형 명확화 시스템**
- **지능적 질문 생성**: 모호한 쿼리를 단계별 질문으로 명확화
- **연속 대화**: 컨텍스트를 유지하며 추가 정보 요청
- **후속 질문 제안**: AI가 관련 질문들을 자동 제안

## 🏗️ **시스템 아키텍처**

```
┌─────────────────────────────────────────────────────────────┐
│                IntegratedText2SQLSystem                     │
│                    (통합 관리자)                           │
└─────────────────┬───────────────────┬─────────────────────────┘
                  │                   │
                  ▼                   ▼
┌─────────────────────────────┐ ┌─────────────────────────────┐
│  EnhancedQueryIntentAnalyzer│ │   ClarificationManager      │
│    (고도화된 의도 분석)      │ │     (명확화 관리)            │
└─────────────────┬───────────┘ └─────────────────┬───────────┘
                  │                               │
                  └───────────────┬───────────────┘
                                  ▼
                    ┌─────────────────────────────┐
                    │   HybridDataSourceManager   │
                    │     (하이브리드 데이터)     │
                    └─────────┬───────────────────┘
                              │
        ┌─────────────────────┼─────────────────────┐
        ▼                     ▼                     ▼
┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐
│   OracleDB      │ │   ChromaDB      │ │ VisualizationGen│
│  (정형 데이터)   │ │  (비정형 데이터) │ │   (시각화)       │
└─────────────────┘ └─────────────────┘ └─────────────────┘
```

## 🚀 **핵심 기능**

### **쿼리 예시들:**

1. **단순 정형 데이터**: "사용자 테이블을 보여주세요"
2. **시각화 포함**: "월별 매출을 라인 차트로 그려주세요"
3. **문서 검색**: "고객 서비스 관련 문서를 찾아주세요"
4. **하이브리드 분석**: "매출 데이터와 회의록을 함께 분석해주세요"
5. **복잡한 요청**: "부서별 성과를 차트로 보여주고 관련 보고서도 검색해주세요"

### **처리 흐름:**
1. **의도 분석** → 정형/비정형/하이브리드 판단
2. **명확화** → 모호한 부분 질문으로 해결
3. **데이터 조회** → Oracle/ChromaDB 병렬 실행
4. **시각화** → 차트/표/대시보드 자동 생성
5. **응답** → 통합 결과 + 후속 질문 제안

## 💡 **주요 혁신점**

- **LlamaIndex 완전 통합**: 고급 문서 검색과 임베딩 기반 유사도 검색
- **비동기 처리**: Oracle과 ChromaDB 병렬 조회로 성능 최적화
- **지능형 데이터 결합**: 정형 데이터에 관련 문서 자동 연결
- **상황별 시각화**: 데이터 특성에 따른 최적 차트 자동 선택
- **연속 대화**: 세션 기반으로 이전 대화 맥락 유지

이제 "사용자가 매출 데이터를 요청하면서 관련 문서도 함께 보고 차트로 시각화하고 싶다"는 복잡한 요구사항도 한 번의 자연어 질의로 처리할 수 있습니다! 🎉
